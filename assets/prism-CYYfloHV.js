import{b as B,c as w,u as M,a as N,E as V}from"./index-C2AhXWuI.js";import{p as E,_ as P,o as A,c as k,f as u,a as x,d as v,w as L,ao as z,al as $}from"./app-BIv4BGsj.js";import{u as D,E as F}from"./index-XVBT3eyP.js";const T=E({name:"ElAmapLocaPrism",inheritAttrs:!1,__name:"PrismLayer",props:B({cullface:{type:String},acceptLight:{type:Boolean,default:!0},shininess:{type:Number},hasSide:{type:Boolean,default:!0},depth:{type:Boolean,default:!0}}),emits:w,setup(p,{expose:h,emit:_}){const t=p,l=_;let r,c,n;const{$$getInstance:y,parentInstance:d}=D(a=>new Promise(S=>{r=new Loca.PrismLayer(a);const g=N({parentInstance:d,$amapComponent:r,emits:l,props:t,setStyle(){const o=Object.assign({},{radius:20,unit:"px",sideNumber:3,rotation:0,altitude:0,height:100,topColor:"#fff",sideTopColor:"#fff",sideBottomColor:"#fff"},t.defaultStyleValue),i={radius:o.radius,unit:o.unit,sideNumber:o.sideNumber,rotation:(m,e)=>(e.properties=e.properties||{},e.properties.rotation===void 0?o.rotation:e.properties.rotation),altitude:o.altitude,height:(m,e)=>(e.properties=e.properties||{},e.properties.height===void 0?o.height:e.properties.height),topColor:(m,e)=>(e.properties=e.properties||{},e.properties.topColor===void 0?o.topColor:e.properties.topColor),sideTopColor:(m,e)=>(e.properties=e.properties||{},e.properties.sideTopColor===void 0?o.sideTopColor:e.properties.sideTopColor),sideBottomColor:(m,e)=>(e.properties=e.properties||{},e.properties.sideBottomColor===void 0?o.sideBottomColor:e.properties.sideBottomColor)},f=Object.assign({},i,t.layerStyle);r.setStyle(f)}});c=g._destroyComponent,n=g.setSource,S(r)}),{emits:l,watchRedirectFn:M({setSource(){n&&n()},$amapComponent:()=>r,props:t}),destroyComponent(){c&&c(),r=null}});h({$$getInstance:y});const b={props:t,emits:l,get $amapComponent(){return r},set $amapComponent(a){r=a},get _destroyComponent(){return c},set _destroyComponent(a){c=a},get _setSource(){return n},set _setSource(a){n=a},$$getInstance:y,parentInstance:d};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}});function j(p,h,_,t,l,r){return A(),k("div")}const C=P(T,[["render",j],["__file","PrismLayer.vue"]]);C.install=p=>(p.component(C.name,C),p);const G=C,O=E({__name:"prism",setup(p,{expose:h}){h();const _=u(2),t=u([103.594884,36.964587]),l=u(55);let r=null;const c=u("https://a.amap.com/Loca/static/loca-v2/demos/mock_data/gdp.json"),n={上海市:"https://a.amap.com/Loca/static/loca-v2/demos/images/top-one.png",北京市:"https://a.amap.com/Loca/static/loca-v2/demos/images/top-two.png",广州市:"https://a.amap.com/Loca/static/loca-v2/demos/images/top-three.png"},y=u({unit:"meter",sideNumber:32,topColor:(s,o)=>o.properties.GDP>7e3?"#E97091":"#2852F1",sideTopColor:(s,o)=>o.properties.GDP>7e3?"#E97091":"#2852F1",sideBottomColor:"#002bb9",radius:15e3,height:(s,o)=>{const i=o.properties,f=Math.max(100,Math.sqrt(i.GDP)*9e3-5e4),m=n[i.名称];return m&&r.add(new AMap.Marker({anchor:"bottom-center",position:[o.coordinates[0],o.coordinates[1],f],content:`<div style="margin-bottom: 10px; float: left; font-size: 14px;height: 57px; width: 180px; color:#fff; background: no-repeat url(${m}); background-size: 100%;"><p style="margin: 7px 0 0 35px; height: 20px; line-height:20px;">${i.名称}人口 ${i.人口}</p><p style="margin: 4px 0 0 35px; height: 20px; line-height:20px; color: #00a9ff; font-size: 13px;">${i.GDP} 元</p></div>`})),f},altitude:0}),d=u(!0),g={zoom:_,center:t,pitch:l,get map(){return r},set map(s){r=s},sourceUrl:c,topConf:n,layerStyle:y,visible:d,changeVisible:()=>{d.value=!d.value},clickMap:s=>{console.log("click map: ",s)},initMap:s=>{r=s,console.log("init map: ",r)},get ElAmap(){return F},get ElAmapLoca(){return V},get ElAmapLocaPrism(){return G}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),I={class:"map-page-container"},R={class:"toolbar"};function U(p,h,_,t,l,r){return A(),k($,null,[x("div",I,[v(t.ElAmap,{"view-mode":"3D",pitch:t.pitch,"show-label":!1,center:t.center,zoom:t.zoom,onClick:t.clickMap,onInit:t.initMap},{default:L(()=>[v(t.ElAmapLoca,null,{default:L(()=>[v(t.ElAmapLocaPrism,{visible:t.visible,"source-url":t.sourceUrl,"layer-style":t.layerStyle,"visible-duration":500},null,8,["visible","source-url","layer-style"])]),_:1})]),_:1},8,["pitch","center","zoom"])]),x("div",R,[x("button",{onClick:t.changeVisible},z(t.visible?"隐藏":"显示"),1)])],64)}const J=P(O,[["render",U],["__file","prism.vue"]]);export{J as default};

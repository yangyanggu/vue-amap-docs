import{b as w,c as V,u as M,a as W,E as H}from"./index-C2AhXWuI.js";import{p as x,_ as k,o as E,c as f,f as d,a as S,d as b,w as v,ao as j,al as z}from"./app-BIv4BGsj.js";import{u as B,E as F}from"./index-XVBT3eyP.js";const I=x({name:"ElAmapLocaPulseLink",inheritAttrs:!1,__name:"PulseLinkLayer",props:w({depth:{type:Boolean,default:!0}}),emits:V,setup(a,{expose:m,emit:h}){const t=a,p=h;let o,c,s;const{$$getInstance:y,parentInstance:C}=B(n=>new Promise(u=>{o=new Loca.PulseLinkLayer(n);const r=W({parentInstance:C,$amapComponent:o,emits:p,props:t,setStyle(){const i=Object.assign({},{lineColors:["#fff"],height:100,maxHeightScale:0,smoothSteps:50,lineWidth:[1,1],unit:"px",dash:[4e3,0,4e3,0],speed:100,headColor:"rgba(0, 0, 0, 0.75)",trailColor:"rgba(0, 0, 0, 0.25)",flowLength:100},t.defaultStyleValue),A={lineColors:(l,e)=>(e.properties=e.properties||{},e.properties.lineColors===void 0?i.lineColors:e.properties.lineColors),height:(l,e)=>(e.properties=e.properties||{},e.properties.height===void 0?i.height:e.properties.height),maxHeightScale:(l,e)=>(e.properties=e.properties||{},e.properties.maxHeightScale===void 0?i.maxHeightScale:e.properties.maxHeightScale),smoothSteps:(l,e)=>(e.properties=e.properties||{},e.properties.smoothSteps===void 0?i.smoothSteps:e.properties.smoothSteps),lineWidth:(l,e)=>(e.properties=e.properties||{},e.properties.lineWidth===void 0?i.lineWidth:e.properties.lineWidth),unit:i.unit,dash:(l,e)=>(e.properties=e.properties||{},e.properties.dash===void 0?i.dash:e.properties.dash),speed:(l,e)=>(e.properties=e.properties||{},e.properties.speed===void 0?i.speed:e.properties.speed),headColor:(l,e)=>(e.properties=e.properties||{},e.properties.headColor===void 0?i.headColor:e.properties.headColor),trailColor:(l,e)=>(e.properties=e.properties||{},e.properties.trailColor===void 0?i.trailColor:e.properties.trailColor),flowLength:i.flowLength},P=Object.assign({},A,t.layerStyle);o.setStyle(P)}});c=r._destroyComponent,s=r.setSource,u(o)}),{emits:p,watchRedirectFn:M({setSource(){s&&s()},$amapComponent:()=>o,props:t}),destroyComponent(){c&&c(),o=null}});m({$$getInstance:y});const L={props:t,emits:p,get $amapComponent(){return o},set $amapComponent(n){o=n},get _destroyComponent(){return c},set _destroyComponent(n){c=n},get _setSource(){return s},set _setSource(n){s=n},$$getInstance:y,parentInstance:C};return Object.defineProperty(L,"__isScriptSetup",{enumerable:!1,value:!0}),L}});function O(a,m,h,t,p,o){return E(),f("div")}const g=k(I,[["render",O],["__file","PulseLinkLayer.vue"]]);g.install=a=>(a.component(g.name,g),a);const N=g,R=x({__name:"pulse-link",setup(a,{expose:m}){m();const h=d(5),t=d([109.595668,35.447184]),p=d(55),o=d("https://a.amap.com/Loca/static/loca-v2/demos/mock_data/data-line-out.json"),c=d({unit:"meter",dash:[4e4,0,4e4,0],lineWidth(){return[2e4,1e3]},height(r,_){return _.distance/3+10},smoothSteps:30,speed(r,_){return 1e3+Math.random()*2e5},flowLength:1e5,lineColors(r,_){return["rgb(255,228,105)","rgb(255,164,105)","rgba(1, 34, 249,1)"]},maxHeightScale:.3,headColor:"rgba(255, 255, 0, 1)",trailColor:"rgba(255, 255,0,0)"}),s=d(!0),u={zoom:h,center:t,pitch:p,sourceUrl:o,layerStyle:c,visible:s,changeVisible:()=>{s.value=!s.value},clickMap:r=>{console.log("click map: ",r)},initMap:r=>{console.log("init map: ",r)},initLoca:r=>{r.animate.start()},get ElAmap(){return F},get ElAmapLoca(){return H},get ElAmapLocaPulseLink(){return N}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),D={class:"map-page-container"},U={class:"toolbar"};function $(a,m,h,t,p,o){return E(),f(z,null,[S("div",D,[b(t.ElAmap,{"view-mode":"3D",pitch:t.pitch,"show-label":!1,center:t.center,zoom:t.zoom,onClick:t.clickMap,onInit:t.initMap},{default:v(()=>[b(t.ElAmapLoca,{onInit:t.initLoca},{default:v(()=>[b(t.ElAmapLocaPulseLink,{visible:t.visible,"source-url":t.sourceUrl,"layer-style":t.layerStyle,"visible-duration":500},null,8,["visible","source-url","layer-style"])]),_:1})]),_:1},8,["pitch","center","zoom"])]),S("div",U,[S("button",{onClick:t.changeVisible},j(t.visible?"隐藏":"显示"),1)])],64)}const K=k(R,[["render",$],["__file","pulse-link.vue"]]);export{K as default};

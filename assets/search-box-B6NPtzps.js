import{b as C,g as P,u as x,E as B}from"./index-XVBT3eyP.js";import{p as y,f as p,_ as S,t as w,v as E,o as _,c as h,s as $,a as d,d as b,w as V,ao as M,al as k}from"./app-BIv4BGsj.js";const z=C({type:{type:String},city:{type:String},datatype:{type:String},citylimit:{type:Boolean,default:!1},inputId:{type:String},inputCustom:{type:Boolean,default:!1},outputId:{type:String},outPutDirAuto:{type:Boolean,default:!0},closeResultOnScroll:{type:Boolean,default:!0},lang:{type:String},placeholder:{type:String},debounce:{type:Number,default:100}}),N=y({name:"ElAmapSearchBox",inheritAttrs:!1,__name:"SearchBox",props:z,emits:["init"],setup(o,{expose:a,emit:u}){const t=o,n=u,r=p(P()),c=p(!0);let i,s;const{$$getInstance:l}=x((e,g)=>{e.inputId&&(r.value=e.inputId,delete e.inputId),e.visible&&(c.value=e.visible),e.input=r.value,e.outputId&&(e.output=e.outputId,delete e.outputId);let v;return new Promise(A=>{g.plugin(["AMap.AutoComplete"],()=>{const I=t.debounce;s=AMap.Autocomplete.prototype.onInPut,AMap.Autocomplete.prototype.onInPut=function(){clearTimeout(v),v=setTimeout(()=>{this.output&&this.autoSearch()},I)},i=new AMap.AutoComplete(e),A(i)})})},{emits:n,watchRedirectFn:{__visible(e){c.value=e},__citylimit(e){i.setCityLimit(e)}},destroyComponent(){s&&AMap.Autocomplete&&(AMap.Autocomplete.prototype.onInPut=s)}});a({$$getInstance:l});const f={props:t,emits:n,saveInputId:r,saveVisible:c,get $amapComponent(){return i},set $amapComponent(e){i=e},get preInput(){return s},set preInput(e){s=e},$$getInstance:l};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),T={class:"el-vue-search-box-container"},D=["id","placeholder"];function F(o,a,u,t,n,r){return w((_(),h("div",T,[o.inputCustom?$("",!0):(_(),h("input",{key:0,id:t.saveInputId,type:"text",placeholder:o.placeholder},null,8,D))],512)),[[E,o.visible&&!o.inputCustom]])}const m=S(N,[["render",F],["__file","SearchBox.vue"]]);m.install=o=>(o.component(m.name,m),o);const O=m,R=y({__name:"search-box",setup(o,{expose:a}){a();const u=p(12),t=p([121.59996,31.197646]),n=p(!0),s={zoom:u,center:t,visible:n,switchVisible:()=>{n.value=!n.value},selectPoi:l=>{console.log("selectPoi: ",l)},choosePoi:l=>{console.log("choosePoi: ",l)},get ElAmap(){return B},get ElAmapSearchBox(){return O}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),j={class:"map-page-container"},L={class:"toolbar"};function q(o,a,u,t,n,r){return _(),h(k,null,[d("div",j,[b(t.ElAmap,{center:t.center,zoom:t.zoom},{default:V(()=>[b(t.ElAmapSearchBox,{visible:t.visible,debounce:1e3,onSelect:t.selectPoi,onChoose:t.choosePoi},null,8,["visible"])]),_:1},8,["center","zoom"])]),d("div",L,[d("button",{onClick:a[0]||(a[0]=c=>t.switchVisible())},M(t.visible?"隐藏":"显示"),1)])],64)}const J=S(R,[["render",q],["__file","search-box.vue"]]);export{J as default};

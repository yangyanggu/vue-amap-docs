import{u as D}from"./useEditor-CRncnCXg.js";import{b as F,u as w,i as v,a as C,d as O,E as z}from"./index-XVBT3eyP.js";import{p as B,aq as V,_ as A,o as M,c as S,f as c,a as m,d as h,w as j,ao as E,al as N}from"./app-BIv4BGsj.js";const P=F({center:{type:Array,required:!0},radius:{type:Array,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},draggable:{type:Boolean,default:!1},extData:{type:Object,default:()=>null},strokeStyle:{type:String,validator:n=>["solid","dashed"].indexOf(n)!==-1},strokeDasharray:{type:Array},editable:{type:Boolean,default:!1},editOptions:{type:Object}}),$=B({name:"ElAmapEllipse",inheritAttrs:!1,__name:"Ellipse",props:P,emits:["init","update:center","update:radius"],setup(n,{expose:d,emit:u}){const o=n,s=u;let t;const{$$getInstance:p,parentInstance:a}=w((e,r)=>new Promise(x=>{t=new AMap.Ellipse(e),v(r)?r.add(t):C(r)?r.addOverlay(t):O(r)&&r.add(t),_(),x(t)}),{emits:s,watchRedirectFn:{__zIndex(e){t&&t.setOptions({zIndex:e})},__strokeColor(e){t&&t.setOptions({strokeColor:e})},__strokeOpacity(e){t&&t.setOptions({strokeOpacity:e})},__strokeWeight(e){t&&t.setOptions({strokeWeight:e})},__fillColor(e){t&&t.setOptions({fillColor:e})},__fillOpacity(e){t&&t.setOptions({fillOpacity:e})},__strokeStyle(e){t&&t.setOptions({strokeStyle:e})},__strokeDasharray(e){t&&t.setOptions({strokeDasharray:e})},__editable(e){b().then(()=>{e?i.open():i.close()})}},destroyComponent(){t&&(a!=null&&a.$amapComponent)&&(i&&(a.isDestroy||i.close(),i=null),a.isDestroy||(v(a.$amapComponent)?a.$amapComponent.remove(t):C(a.$amapComponent)?a.$amapComponent.removeOverlay(t):O(a.$amapComponent)&&a.$amapComponent.remove(t)),t.destroy&&t.destroy(),t=null)}}),_=()=>{t.on("dragend",()=>{l(t)}),t.on("touchend",()=>{l(t)})},l=e=>{s("update:center",e.getCenter().toArray()),s("update:radius",e.getRadius())};let i;const g=V(),b=()=>new Promise(e=>{i?e():AMap.plugin(["AMap.EllipseEditor"],()=>{i=new AMap.EllipseEditor(a==null?void 0:a.$amapComponent,t,o.editOptions),D(i,g),y(),e()})}),y=()=>{i.on("addnode",e=>{l(e.target)}),i.on("adjust",e=>{l(e.target)}),i.on("removenode",e=>{l(e.target)}),i.on("add",e=>{l(e.target)}),i.on("end",e=>{l(e.target)}),i.on("move",e=>{l(e.target)})};d({$$getInstance:p});const k={props:o,emits:s,get $amapComponent(){return t},set $amapComponent(e){t=e},$$getInstance:p,parentInstance:a,bindModelEvents:_,emitModel:l,get editor(){return i},set editor(e){i=e},attrs:g,createEditor:b,bindEditorModelEvents:y};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}});function I(n,d,u,o,s,t){return M(),S("div")}const f=A($,[["render",I],["__file","Ellipse.vue"]]);f.install=n=>(n.component(f.name,f),n);const q=f,R=B({__name:"ellipse",setup(n,{expose:d}){d();const u=c(13),o=c([121.5273285,31.21515044]),s=c(!1),t=c(!0),p=c(!0),a=c([121.5273285,31.21515044]),_=c([500,200]),e={zoom:u,center:o,draggable:s,visible:t,edit:p,circleCenter:a,radius:_,clickMap:r=>{console.log("click map: ",r)},initMap:r=>{console.log("init map: ",r)},changeEditable:()=>{p.value=!p.value},toggleVisible:()=>{t.value=!t.value},changeDraggable:()=>{s.value=!s.value},click:r=>{alert("click Circle")},get ElAmap(){return z},get ElAmapEllipse(){return q}};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}}),W={class:"map-page-container"},G={class:"toolbar"};function L(n,d,u,o,s,t){return M(),S(N,null,[m("div",W,[h(o.ElAmap,{"show-label":!1,center:o.center,zoom:o.zoom,onClick:o.clickMap,onInit:o.initMap},{default:j(()=>[h(o.ElAmapEllipse,{center:o.circleCenter,radius:o.radius,visible:o.visible,editable:o.edit,draggable:o.draggable,onClick:o.click},null,8,["center","radius","visible","editable","draggable"])]),_:1},8,["center","zoom"])]),m("div",G,[m("button",{onClick:o.toggleVisible},E(o.visible?"隐藏标记":"显示标记"),1),m("button",{onClick:o.changeDraggable},E(o.draggable?"禁止标记移动":"允许标记移动"),1),m("button",{onClick:o.changeEditable},E(o.edit?"停止编辑":"开始编辑"),1)])],64)}const K=A(R,[["render",L],["__file","ellipse.vue"]]);export{K as default};

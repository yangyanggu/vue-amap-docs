import{f as S,g as k,u as A,h as P,i as B,j as h,k as M,l as D,m as R,n as T,p as L,_ as N,r as O,o as I,q,w as F,a as _,d as C,c as J,s as U,t as j,v as H}from"./app-BIv4BGsj.js";import W from"./source-code-exChWPjj.js";import z from"./copy-icon-C4yrElWr.js";import G from"./codepen-jxA-E5Us.js";import K from"./vp-example-CS5VbJjU.js";import Q from"./vp-source-code-Cg9i4s6n.js";function V(e){return P()?(B(e),!0):!1}function g(e){return typeof e=="function"?e():A(e)}const w=typeof window<"u",X=()=>{};function Y(e,n,o={}){const{immediate:t=!0}=o,r=S(!1);let i=null;function a(){i&&(clearTimeout(i),i=null)}function u(){r.value=!1,a()}function p(...l){a(),r.value=!0,i=setTimeout(()=>{r.value=!1,i=null,e(...l)},g(n))}return t&&(r.value=!0,w&&p()),V(u),{isPending:k(r),start:p,stop:u}}function Z(e){var n;const o=g(e);return(n=o==null?void 0:o.$el)!=null?n:o}const $=w?window:void 0,ee=w?window.navigator:void 0;function oe(...e){let n,o,t,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,t,r]=e,n=$):[n,o,t,r]=e,!n)return X;Array.isArray(o)||(o=[o]),Array.isArray(t)||(t=[t]);const i=[],a=()=>{i.forEach(c=>c()),i.length=0},u=(c,m,f,y)=>(c.addEventListener(m,f,y),()=>c.removeEventListener(m,f,y)),p=M(()=>[Z(n),g(r)],([c,m])=>{a(),c&&i.push(...o.flatMap(f=>t.map(y=>u(c,f,y,m))))},{immediate:!0,flush:"post"}),l=()=>{p(),a()};return V(l),l}function te(){const e=S(!1);return D()&&R(()=>{e.value=!0}),e}function ne(e){const n=te();return h(()=>(n.value,!!e()))}function re(e={}){const{navigator:n=ee,read:o=!1,source:t,copiedDuring:r=1500,legacy:i=!1}=e,a=["copy","cut"],u=ne(()=>n&&"clipboard"in n),p=h(()=>u.value||i),l=S(""),c=S(!1),m=Y(()=>c.value=!1,r);function f(){u.value?n.clipboard.readText().then(s=>{l.value=s}):l.value=v()}if(p.value&&o)for(const s of a)oe(s,f);async function y(s=g(t)){p.value&&s!=null&&(u.value?await n.clipboard.writeText(s):b(s),l.value=s,c.value=!0,m.start())}function b(s){const d=document.createElement("textarea");d.value=s??"",d.style.position="absolute",d.style.opacity="0",document.body.appendChild(d),d.select(),document.execCommand("copy"),d.remove()}function v(){var s,d,x;return(x=(d=(s=document==null?void 0:document.getSelection)==null?void 0:s.call(document))==null?void 0:d.toString())!=null?x:""}return{isSupported:p,text:l,copied:c,copy:y}}const E=e=>typeof e=="boolean",ie=e=>{const n=T(e)?e:S(E(e)?e:!1);return[n,o=>{n.value=E(o)?o:!n.value}]},se="Demo",ce=L({__name:"vp-demo",props:{source:{type:String,required:!0},path:{type:String,required:!0},rawSource:{type:String,required:!0},description:{type:String},importJson:{type:String}},setup(e,{expose:n}){n();const o=e,t=D(),r=decodeURIComponent(o.rawSource),{copy:i,isSupported:a}=re({source:r,read:!1}),[u,p]=ie(),l=h(()=>decodeURIComponent(o.description)),c=async()=>{a||alert("复制失败");try{await i(),alert("复制成功")}catch(v){alert(v.message)}},m=h(()=>o.path.replaceAll("/","-"));function f(v){return btoa(unescape(encodeURIComponent(v)))}const b={name:se,props:o,vm:t,decodeSource:r,copy:i,isSupported:a,sourceVisible:u,setSourceVisible:p,decodedDescription:l,copyCode:c,demoPath:m,utoa:f,openInPlayground:()=>{const v={"App.vue":r};o.importJson&&(v["import-map.json"]=decodeURIComponent(o.importJson));const d=`https://amap-run.guyixi.cn/#${f(JSON.stringify(v))}`;window.open(d)},SourceCodeIcon:W,CopyIcon:z,CodepenIcon:G,Example:K,SourceCode:Q};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),ae=["innerHTML"],ue={class:"example"},le={class:"op-btns"},de={key:0,class:"split-line"};function pe(e,n,o,t,r,i){const a=O("ClientOnly");return I(),q(a,null,{default:F(()=>[_("p",{class:"example-description",innerHTML:t.decodedDescription},null,8,ae),_("div",ue,[_("div",le,[_("div",{class:"op-btn",title:"在playground中打开",onClick:t.openInPlayground},[C(t.CodepenIcon)]),_("div",{class:"op-btn",title:"拷贝代码",onClick:t.copyCode},[C(t.CopyIcon)]),_("div",{class:"op-btn",title:"查看原码",onClick:n[0]||(n[0]=(...u)=>t.setSourceVisible&&t.setSourceVisible(...u))},[C(t.SourceCodeIcon)])]),t.sourceVisible?(I(),J("div",de)):U("",!0),C(t.Example,{file:o.path,demo:t.demoPath},null,8,["file","demo"]),j(C(t.SourceCode,{source:o.source},null,8,["source"]),[[H,t.sourceVisible]])])]),_:1})}const Se=N(ce,[["render",pe],["__scopeId","data-v-bea4e94f"],["__file","vp-demo.vue"]]);export{Se as default};

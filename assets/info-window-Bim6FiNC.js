import{b as k,u as E,E as W}from"./index-XVBT3eyP.js";import{p as w,f as m,af as I,ak as B,_ as C,o as h,c as y,a as c,ad as S,d as b,w as g,al as $}from"./app-BIv4BGsj.js";const x=k({isCustom:{type:Boolean,default:!1},autoMove:{type:Boolean,default:!0},avoid:{type:Array},closeWhenClickMap:{type:Boolean,default:!1},content:{type:Object},size:{type:Array},anchor:{type:String},offset:{type:Array},position:{type:Object}}),O=w({name:"ElAmapInfoWindow",inheritAttrs:!1,__name:"InfoWindow",props:x,emits:["init","update:visible"],setup(s,{expose:l,emit:p}){const e=s,i=p;let o,t=null;const{$$getInstance:v,parentInstance:a}=E((n,r)=>new Promise(M=>{if(n.content||(n.content=d()),o=new AMap.InfoWindow(n),o.on("close",()=>{i("update:visible",!1)}),e.visible&&o.open(r,e.position),!e.content&&o){const A={attributes:!0,childList:!0,subtree:!0};t=new MutationObserver(()=>{o.setContent(d())}),t.observe(u.value,A)}M(o)}),{emits:i,watchRedirectFn:{__position(n){e.visible?o.open(a==null?void 0:a.$amapComponent,n):o.setPosition(n)},__visible(n){const r=o.getPosition();r&&(n?o.open(a==null?void 0:a.$amapComponent,[r.lng,r.lat]):o.close())}},destroyComponent(){t&&(t.disconnect(),t=null),o&&(o.getIsOpen()&&o.close(),o=null)}}),u=m(),d=()=>u.value;I(()=>{o&&o.close()}),B(()=>{!e.content&&o&&o.setContent(d())}),l({$$getInstance:v});const f={props:e,emits:i,get $amapComponent(){return o},set $amapComponent(n){o=n},get observer(){return t},set observer(n){t=n},$$getInstance:v,parentInstance:a,infoRef:u,getSlotContent:d};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),P={style:{display:"none"}},z={ref:"infoRef"};function V(s,l,p,e,i,o){return h(),y("div",P,[c("div",z,[S(s.$slots,"default")],512)])}const _=C(O,[["render",V],["__file","InfoWindow.vue"]]);_.install=s=>(s.component(_.name,_),s);const j=_,F=w({__name:"info-window",setup(s,{expose:l}){l();const p=m(16),e=m([120,31]),i=m(!0),f={zoom:p,center:e,visible:i,changeVisible:()=>{i.value=!i.value},clickMap:n=>{console.log("click map: ",n)},initMap:n=>{console.log("init map: ",n)},completeMap:n=>{console.log(n)},moveendMap:n=>{console.log("moveendMap: ",n)},changeCenter:()=>{const n=e.value[0]+.01,r=e.value[1]+.01;e.value=[n,r]},get ElAmap(){return W},get ElAmapInfoWindow(){return j}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),R={class:"map-page-container"},U=c("div",null,"hello world",-1);function N(s,l,p,e,i,o){return h(),y($,null,[c("div",R,[b(e.ElAmap,{"show-label":!1,center:e.center,zoom:e.zoom,onClick:e.clickMap,onInit:e.initMap,onComplete:e.completeMap,onMoveend:e.moveendMap},{default:g(()=>[b(e.ElAmapInfoWindow,{visible:e.visible,"onUpdate:visible":l[0]||(l[0]=t=>e.visible=t),position:e.center},{default:g(()=>[U]),_:1},8,["visible","position"])]),_:1},8,["center","zoom"])]),c("div",{class:"toolbar"},[c("button",{onClick:e.changeVisible}," 显隐 "),c("button",{onClick:e.changeCenter}," 更换中心点 ")])],64)}const T=C(F,[["render",N],["__file","info-window.vue"]]);export{T as default};

import{J as ue,n as fe,R as de,aw as S,w as G,ax as ge,V,ay as pe,az as me,aA as P,U as ve,aB as y,i as be,S as ye,M as I}from"./three.module-BVXrWKE2.js";import{c as _e}from"./threeUtil-BWGvaqqj.js";import{p as Z,_ as Q,o as U,c as X,f as T,a as j,d as B,w as K,q as we,s as xe,ao as ke,al as Me}from"./app-BIv4BGsj.js";import{b as Fe,u as Ee,E as Ae}from"./index-XVBT3eyP.js";import{E as Le,a as Se}from"./index-CrMMG-jN.js";import"./arrayEach-Bzrg1Ilf.js";function Te(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Y={exports:{}},ee={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},te={exports:{}},Ce=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},ze=Ce,Oe=Array.prototype.concat,De=Array.prototype.slice,J=te.exports=function(t){for(var n=[],r=0,o=t.length;r<o;r++){var a=t[r];ze(a)?n=Oe.call(n,De.call(a)):n.push(a)}return n};J.wrap=function(e){return function(){return e(J(arguments))}};var Pe=te.exports,F=ee,A=Pe,ne=Object.hasOwnProperty,re=Object.create(null);for(var $ in F)ne.call(F,$)&&(re[F[$]]=$);var v=Y.exports={to:{},get:{}};v.get=function(e){var t=e.substring(0,3).toLowerCase(),n,r;switch(t){case"hsl":n=v.get.hsl(e),r="hsl";break;case"hwb":n=v.get.hwb(e),r="hwb";break;default:n=v.get.rgb(e),r="rgb";break}return n?{model:r,value:n}:null};v.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^(\w+)$/,s=[0,0,0,1],i,l,h;if(i=e.match(n)){for(h=i[2],i=i[1],l=0;l<3;l++){var f=l*2;s[l]=parseInt(i.slice(f,f+2),16)}h&&(s[3]=parseInt(h,16)/255)}else if(i=e.match(t)){for(i=i[1],h=i[3],l=0;l<3;l++)s[l]=parseInt(i[l]+i[l],16);h&&(s[3]=parseInt(h+h,16)/255)}else if(i=e.match(r)){for(l=0;l<3;l++)s[l]=parseInt(i[l+1],0);i[4]&&(i[5]?s[3]=parseFloat(i[4])*.01:s[3]=parseFloat(i[4]))}else if(i=e.match(o)){for(l=0;l<3;l++)s[l]=Math.round(parseFloat(i[l+1])*2.55);i[4]&&(i[5]?s[3]=parseFloat(i[4])*.01:s[3]=parseFloat(i[4]))}else return(i=e.match(a))?i[1]==="transparent"?[0,0,0,0]:ne.call(F,i[1])?(s=F[i[1]],s[3]=1,s):null:null;for(l=0;l<3;l++)s[l]=_(s[l],0,255);return s[3]=_(s[3],0,1),s};v.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),o=(parseFloat(n[1])%360+360)%360,a=_(parseFloat(n[2]),0,100),s=_(parseFloat(n[3]),0,100),i=_(isNaN(r)?1:r,0,1);return[o,a,s,i]}return null};v.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),o=(parseFloat(n[1])%360+360)%360,a=_(parseFloat(n[2]),0,100),s=_(parseFloat(n[3]),0,100),i=_(isNaN(r)?1:r,0,1);return[o,a,s,i]}return null};v.to.hex=function(){var e=A(arguments);return"#"+C(e[0])+C(e[1])+C(e[2])+(e[3]<1?C(Math.round(e[3]*255)):"")};v.to.rgb=function(){var e=A(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};v.to.rgb.percent=function(){var e=A(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};v.to.hsl=function(){var e=A(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};v.to.hwb=function(){var e=A(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};v.to.keyword=function(e){return re[e.slice(0,3)]};function _(e,t,n){return Math.min(Math.max(t,e),n)}function C(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var Ie=Y.exports;const E=ee,oe={};for(const e of Object.keys(E))oe[E[e]]=e;const c={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var se=c;for(const e of Object.keys(c)){if(!("channels"in c[e]))throw new Error("missing channels property: "+e);if(!("labels"in c[e]))throw new Error("missing channel labels property: "+e);if(c[e].labels.length!==c[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=c[e];delete c[e].channels,delete c[e].labels,Object.defineProperty(c[e],"channels",{value:t}),Object.defineProperty(c[e],"labels",{value:n})}c.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.min(t,n,r),a=Math.max(t,n,r),s=a-o;let i,l;a===o?i=0:t===a?i=(n-r)/s:n===a?i=2+(r-t)/s:r===a&&(i=4+(t-n)/s),i=Math.min(i*60,360),i<0&&(i+=360);const h=(o+a)/2;return a===o?l=0:h<=.5?l=s/(a+o):l=s/(2-a-o),[i,l*100,h*100]};c.rgb.hsv=function(e){let t,n,r,o,a;const s=e[0]/255,i=e[1]/255,l=e[2]/255,h=Math.max(s,i,l),f=h-Math.min(s,i,l),u=function(b){return(h-b)/6/f+1/2};return f===0?(o=0,a=0):(a=f/h,t=u(s),n=u(i),r=u(l),s===h?o=r-n:i===h?o=1/3+t-r:l===h&&(o=2/3+n-t),o<0?o+=1:o>1&&(o-=1)),[o*360,a*100,h*100]};c.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const o=c.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[o,a*100,r*100]};c.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.min(1-t,1-n,1-r),a=(1-t-o)/(1-o)||0,s=(1-n-o)/(1-o)||0,i=(1-r-o)/(1-o)||0;return[a*100,s*100,i*100,o*100]};function je(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}c.rgb.keyword=function(e){const t=oe[e];if(t)return t;let n=1/0,r;for(const o of Object.keys(E)){const a=E[o],s=je(e,a);s<n&&(n=s,r=o)}return r};c.keyword.rgb=function(e){return E[e]};c.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const o=t*.4124+n*.3576+r*.1805,a=t*.2126+n*.7152+r*.0722,s=t*.0193+n*.1192+r*.9505;return[o*100,a*100,s*100]};c.rgb.lab=function(e){const t=c.rgb.xyz(e);let n=t[0],r=t[1],o=t[2];n/=95.047,r/=100,o/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const a=116*r-16,s=500*(n-r),i=200*(r-o);return[a,s,i]};c.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let o,a,s;if(n===0)return s=r*255,[s,s,s];r<.5?o=r*(1+n):o=r+n-r*n;const i=2*r-o,l=[0,0,0];for(let h=0;h<3;h++)a=t+1/3*-(h-1),a<0&&a++,a>1&&a--,6*a<1?s=i+(o-i)*6*a:2*a<1?s=o:3*a<2?s=i+(o-i)*(2/3-a)*6:s=i,l[h]=s*255;return l};c.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,o=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,o*=a<=1?a:2-a;const s=(r+n)/2,i=r===0?2*o/(a+o):2*n/(r+n);return[t,i*100,s*100]};c.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const o=Math.floor(t)%6,a=t-Math.floor(t),s=255*r*(1-n),i=255*r*(1-n*a),l=255*r*(1-n*(1-a));switch(r*=255,o){case 0:return[r,l,s];case 1:return[i,r,s];case 2:return[s,r,l];case 3:return[s,i,r];case 4:return[l,s,r];case 5:return[r,s,i]}};c.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,o=Math.max(r,.01);let a,s;s=(2-n)*r;const i=(2-n)*o;return a=n*o,a/=i<=1?i:2-i,a=a||0,s/=2,[t,a*100,s*100]};c.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const o=n+r;let a;o>1&&(n/=o,r/=o);const s=Math.floor(6*t),i=1-r;a=6*t-s,s&1&&(a=1-a);const l=n+a*(i-n);let h,f,u;switch(s){default:case 6:case 0:h=i,f=l,u=n;break;case 1:h=l,f=i,u=n;break;case 2:h=n,f=i,u=l;break;case 3:h=n,f=l,u=i;break;case 4:h=l,f=n,u=i;break;case 5:h=i,f=n,u=l;break}return[h*255,f*255,u*255]};c.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,o=e[3]/100,a=1-Math.min(1,t*(1-o)+o),s=1-Math.min(1,n*(1-o)+o),i=1-Math.min(1,r*(1-o)+o);return[a*255,s*255,i*255]};c.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let o,a,s;return o=t*3.2406+n*-1.5372+r*-.4986,a=t*-.9689+n*1.8758+r*.0415,s=t*.0557+n*-.204+r*1.057,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),s=Math.min(Math.max(0,s),1),[o*255,a*255,s*255]};c.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const o=116*n-16,a=500*(t-n),s=200*(n-r);return[o,a,s]};c.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let o,a,s;a=(t+16)/116,o=n/500+a,s=a-r/200;const i=a**3,l=o**3,h=s**3;return a=i>.008856?i:(a-16/116)/7.787,o=l>.008856?l:(o-16/116)/7.787,s=h>.008856?h:(s-16/116)/7.787,o*=95.047,a*=100,s*=108.883,[o,a,s]};c.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let o;o=Math.atan2(r,n)*360/2/Math.PI,o<0&&(o+=360);const s=Math.sqrt(n*n+r*r);return[t,s,o]};c.lch.lab=function(e){const t=e[0],n=e[1],o=e[2]/360*2*Math.PI,a=n*Math.cos(o),s=n*Math.sin(o);return[t,a,s]};c.rgb.ansi16=function(e,t=null){const[n,r,o]=e;let a=t===null?c.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let s=30+(Math.round(o/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return a===2&&(s+=60),s};c.hsv.ansi16=function(e){return c.rgb.ansi16(c.hsv.rgb(e),e[2])};c.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};c.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(~~(e>50)+1)*.5,r=(t&1)*n*255,o=(t>>1&1)*n*255,a=(t>>2&1)*n*255;return[r,o,a]};c.ansi256.rgb=function(e){if(e>=232){const a=(e-232)*10+8;return[a,a,a]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,o=t%6/5*255;return[n,r,o]};c.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n};c.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=n.split("").map(i=>i+i).join(""));const r=parseInt(n,16),o=r>>16&255,a=r>>8&255,s=r&255;return[o,a,s]};c.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,o=Math.max(Math.max(t,n),r),a=Math.min(Math.min(t,n),r),s=o-a;let i,l;return s<1?i=a/(1-s):i=0,s<=0?l=0:o===t?l=(n-r)/s%6:o===n?l=2+(r-t)/s:l=4+(t-n)/s,l/=6,l%=1,[l*360,s*100,i*100]};c.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let o=0;return r<1&&(o=(n-.5*r)/(1-r)),[e[0],r*100,o*100]};c.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],r*100,o*100]};c.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const o=[0,0,0],a=t%1*6,s=a%1,i=1-s;let l=0;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=i,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=i,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=i}return l=(1-n)*r,[(n*o[0]+l)*255,(n*o[1]+l)*255,(n*o[2]+l)*255]};c.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let o=0;return r>0&&(o=t/r),[e[0],o*100,r*100]};c.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let o=0;return r>0&&r<.5?o=t/(2*r):r>=.5&&r<1&&(o=t/(2*(1-r))),[e[0],o*100,r*100]};c.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};c.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,o=r-t;let a=0;return o<1&&(a=(r-o)/(1-o)),[e[0],o*100,a*100]};c.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};c.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};c.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};c.gray.hsl=function(e){return[0,0,e[0]]};c.gray.hsv=c.gray.hsl;c.gray.hwb=function(e){return[0,100,e[0]]};c.gray.cmyk=function(e){return[0,0,0,e[0]]};c.gray.lab=function(e){return[e[0],0,0]};c.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r};c.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const O=se;function Be(){const e={},t=Object.keys(O);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function $e(e){const t=Be(),n=[e];for(t[e].distance=0;n.length;){const r=n.pop(),o=Object.keys(O[r]);for(let a=o.length,s=0;s<a;s++){const i=o[s],l=t[i];l.distance===-1&&(l.distance=t[r].distance+1,l.parent=r,n.unshift(i))}}return t}function Ue(e,t){return function(n){return t(e(n))}}function qe(e,t){const n=[t[e].parent,e];let r=O[t[e].parent][e],o=t[e].parent;for(;t[o].parent;)n.unshift(t[o].parent),r=Ue(O[t[o].parent][o],r),o=t[o].parent;return r.conversion=n,r}var Ne=function(e){const t=$e(e),n={},r=Object.keys(t);for(let o=r.length,a=0;a<o;a++){const s=r[a];t[s].parent!==null&&(n[s]=qe(s,t))}return n};const q=se,Re=Ne,x={},Ge=Object.keys(q);function Ve(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function Ke(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const o=e(n);if(typeof o=="object")for(let a=o.length,s=0;s<a;s++)o[s]=Math.round(o[s]);return o};return"conversion"in e&&(t.conversion=e.conversion),t}Ge.forEach(e=>{x[e]={},Object.defineProperty(x[e],"channels",{value:q[e].channels}),Object.defineProperty(x[e],"labels",{value:q[e].labels});const t=Re(e);Object.keys(t).forEach(r=>{const o=t[r];x[e][r]=Ke(o),x[e][r].raw=Ve(o)})});var Je=x;const k=Ie,m=Je,ae=["keyword","gray","hex"],N={};for(const e of Object.keys(m))N[[...m[e].labels].sort().join("")]=e;const D={};function p(e,t){if(!(this instanceof p))return new p(e,t);if(t&&t in ae&&(t=null),t&&!(t in m))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof p)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const o=k.get(e);if(o===null)throw new Error("Unable to parse color from string: "+e);this.model=o.model,r=m[this.model].channels,this.color=o.value.slice(0,r),this.valpha=typeof o.value[r]=="number"?o.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=m[this.model].channels;const o=Array.prototype.slice.call(e,0,r);this.color=R(o,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const o=Object.keys(e);"alpha"in e&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const a=o.sort().join("");if(!(a in N))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=N[a];const{labels:s}=m[this.model],i=[];for(n=0;n<s.length;n++)i.push(e[s[n]]);this.color=R(i)}if(D[this.model])for(r=m[this.model].channels,n=0;n<r;n++){const o=D[this.model][n];o&&(this.color[n]=o(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}p.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in k.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return k.to[t.model](n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return k.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=m[this.model],{labels:n}=m[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new p([...this.color.map(He(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new p([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:d("rgb",0,g(255)),green:d("rgb",1,g(255)),blue:d("rgb",2,g(255)),hue:d(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:d("hsl",1,g(100)),lightness:d("hsl",2,g(100)),saturationv:d("hsv",1,g(100)),value:d("hsv",2,g(100)),chroma:d("hcg",1,g(100)),gray:d("hcg",2,g(100)),white:d("hwb",1,g(100)),wblack:d("hwb",2,g(100)),cyan:d("cmyk",0,g(100)),magenta:d("cmyk",1,g(100)),yellow:d("cmyk",2,g(100)),black:d("cmyk",3,g(100)),x:d("xyz",0,g(95.047)),y:d("xyz",1,g(100)),z:d("xyz",2,g(108.833)),l:d("lab",0,g(100)),a:d("lab",1),b:d("lab",2),keyword(e){return e!==void 0?new p(e):m[this.model].keyword(this.color)},hex(e){return e!==void 0?new p(e):k.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new p(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),k.to.hex(t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const o=r/255;t[n]=o<=.04045?o/12.92:((o+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return p.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),o=t===void 0?.5:t,a=2*o-1,s=n.alpha()-r.alpha(),i=((a*s===-1?a:(a+s)/(1+a*s))+1)/2,l=1-i;return p.rgb(i*n.red()+l*r.red(),i*n.green()+l*r.green(),i*n.blue()+l*r.blue(),n.alpha()*o+r.alpha()*(1-o))}};for(const e of Object.keys(m)){if(ae.includes(e))continue;const{channels:t}=m[e];p.prototype[e]=function(...n){return this.model===e?new p(this):n.length>0?new p(n,e):new p([...Ze(m[this.model][e].raw(this.color)),this.valpha],e)},p[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=R(n,t)),new p(r,e)}}function We(e,t){return Number(e.toFixed(t))}function He(e){return function(t){return We(t,e)}}function d(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(D[r]||(D[r]=[]))[t]=n;return e=e[0],function(r){let o;return r!==void 0?(n&&(r=n(r)),o=this[e](),o.color[t]=r,o):(o=this[e]().color[t],n&&(o=n(o)),o)}}function g(e){return function(t){return Math.max(0,Math.min(e,t))}}function Ze(e){return Array.isArray(e)?e:[e]}function R(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}var Qe=p;const ie=Te(Qe);function W(e){return ie(e).rgbNumber()}function H(e){return ie(e).alpha()}const Xe=`
#define Polygon

varying vec3 vLightFront;
varying vec3 vIndirectFront;
varying vec3 v_position;
varying vec2 vUv;

#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif

#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {
    v_position = position;
    vUv = uv;

	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>

	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>

	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}
`,Ye=`
uniform vec3 emissive;
uniform float height;
uniform sampler2D texture;
varying vec3 v_position;
varying vec2 vUv;

varying vec3 vLightFront;
varying vec3 vIndirectFront;

#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif


#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	#include <clipping_planes_fragment>
    float percent = v_position.z/height;
    vec2 point = vec2(0, 2.0*percent - 1.0);
    vec4 diffuseColor = texture2D(texture, point);
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;

	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>

	// accumulation

	#ifdef DOUBLE_SIDED

		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;

	#else

		reflectedLight.indirectDiffuse += vIndirectFront;

	#endif

	#include <lightmap_fragment>

	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );

	#ifdef DOUBLE_SIDED

		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;

	#else

		reflectedLight.directDiffuse = vLightFront;

	#endif

	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();

	// modulation

	#include <aomap_fragment>

	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;

	#include <envmap_fragment>

	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}
`;let et=class{constructor(t,n){this.layer=t,this.object=new ue,this.createGlobalMaterial(n),this.layer.add(this.object),this.init(n)}createGlobalMaterial(t){if(t.sideTexture){const n=new fe().load(t.sideTexture);n.wrapS=n.wrapT=de,n.offset.set(0,.5),n.repeat.set(.1,.1),this.sideImgMaterial=new S({depthTest:t.depthTest,map:n,side:G})}else{const n=document.createElement("canvas");n.width=512,n.height=512,n.style.background="transparent";const r=n.getContext("2d");if(r){const o=r.createLinearGradient(0,0,0,512);o.addColorStop(0,t.sideTopColor),o.addColorStop(1,t.sideBottomColor),r.fillStyle=o,r.fillRect(0,0,512,512)}this.canvasTexture=new ge(n)}this.bottomMaterial=new S({depthTest:t.depthTest,transparent:!0,color:W(t.bottomColor),opacity:H(t.bottomColor)}),this.topMaterial=new S({depthTest:t.depthTest,transparent:!0,color:W(t.topColor),opacity:H(t.topColor)})}init(t){t.source.features.forEach(n=>{n.geometry.type==="Polygon"?this.createMesh(n.geometry.coordinates,n.properties,t):n.geometry.type==="MultiPolygon"&&n.geometry.coordinates.forEach(r=>{this.createMesh(r,n.properties,t)})}),this.refresh()}createMesh(t,n,r){if(t.length===0)return;n=n||{};const o=n.height!==void 0?n.height:r.height,a=t[0],s=[],i=[];for(let u=0;u<a.length;u++){const b=this.convertLngLat(a[u]);s.push(new V(b[0],b[1]))}for(let u=1;u<t.length;u++){const b=t[u],M=[];for(let w=0;w<b.length;w++){const L=this.convertLngLat(b[w]);M.push(new V(L[0],L[1]))}i.push(new pe(M))}const l=new me(s);if(l.holes=i,o>0){const u=new P(l,{depth:o,bevelEnabled:!1,steps:1,bevelSize:0}),M=[new S({visible:!1})];let w;if(r.sideTexture)w=this.sideImgMaterial;else{const he=ve.merge([y.common,y.specularmap,y.envmap,y.aomap,y.lightmap,y.emissivemap,y.fog,y.lights,{emissive:{value:new be("#000")},height:{value:o},texture:{value:this.canvasTexture}}]);w=new ye({depthTest:r.depthTest,depthWrite:!0,side:G,transparent:!0,lights:!0,uniforms:he,vertexShader:Xe,fragmentShader:Ye})}M.push(w);const L=new P(l,{depth:0}),le=new I(L,this.bottomMaterial);this.object.add(le);const ce=new I(u,M);this.object.add(ce)}const h=new P(l,{depth:0}),f=new I(h,this.topMaterial);f.translateZ(o),this.object.add(f)}convertLngLat(t){var n;return(n=this.layer)==null?void 0:n.convertLngLat(t)}refresh(){var t;(t=this.layer)==null||t.update()}show(){this.object.visible=!0,this.refresh()}hide(){this.object.visible=!1,this.refresh()}remove(){var t;this.object&&((t=this.layer)==null||t.remove(this.object))}destroy(){this.object&&(_e(this.object),this.bottomMaterial&&(this.bottomMaterial.dispose(),this.bottomMaterial=void 0),this.canvasTexture&&this.canvasTexture.dispose(),this.topMaterial&&(this.topMaterial.dispose(),this.topMaterial=void 0),this.sideImgMaterial&&(this.sideImgMaterial.dispose(),this.sideImgMaterial=void 0),this.object=null,this.layer=void 0)}};const tt=Z({name:"ElAmapThreePolygon",inheritAttrs:!1,__name:"ThreePolygon",props:Fe({sideTopColor:{type:String,default:"#ffffff"},sideBottomColor:{type:String,default:"#ffffff"},sideTexture:{type:String},topColor:{type:String,default:"#ffffff"},bottomColor:{type:String,default:"#ffffff"},height:{type:Number,default:30},depthTest:{type:Boolean,default:!0},source:{type:Object,required:!0}}),emits:["init"],setup(e,{expose:t,emit:n}){const r=n;let o;const{$$getInstance:a,parentInstance:s}=Ee((l,h)=>new Promise(f=>{o=new et(h,l),f(o)}),{emits:r,destroyComponent(){o&&(s!=null&&s.$amapComponent)&&(s.isDestroy||o.remove(),o.destroy(),o=null)}});t({$$getInstance:a});const i={emits:r,get $amapComponent(){return o},set $amapComponent(l){o=l},$$getInstance:a,parentInstance:s};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});function nt(e,t,n,r,o,a){return U(),X("div")}const z=Q(tt,[["render",nt],["__file","ThreePolygon.vue"]]);z.install=e=>(e.component(z.name,z),e);const rt=z,ot=Z({__name:"three-polygon",setup(e,{expose:t}){t();const n=T([120.109233,30.246411]),r=T(12),o=T(!0),a=T(null),h={center:n,zoom:r,visible:o,source:a,clickMap:f=>{console.log("click map: ",f)},initMap:f=>{console.log("init map: ",f),fetch("https://a.amap.com/Loca/static/loca-v2/demos/mock_data/hz_gn.json").then(u=>u.json()).then(u=>{a.value=u})},changeVisible:()=>{o.value=!o.value},get ElAmap(){return Ae},get ElAmapLayerThree(){return Le},get ElAmapThreeLightAmbient(){return Se},get ElAmapThreePolygon(){return rt}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),st={class:"map-page-container"},at={class:"toolbar"};function it(e,t,n,r,o,a){return U(),X(Me,null,[j("div",st,[B(r.ElAmap,{center:r.center,zoom:r.zoom,"view-mode":"3D",pitch:60,onClick:r.clickMap,onInit:r.initMap},{default:K(()=>[B(r.ElAmapLayerThree,null,{default:K(()=>[B(r.ElAmapThreeLightAmbient,{color:"rgb(255,255,255)",intensity:1}),r.source?(U(),we(r.ElAmapThreePolygon,{key:0,visible:r.visible,source:r.source,"top-color":"rgba(255,0,0,0)","bottom-color":"rgba(255,0,0,0.2)","side-top-color":"rgba(255,255,0,0.1)","side-bottom-color":"rgba(255,255,0,0.9)","depth-test":!0,height:1500},null,8,["visible","source"])):xe("",!0)]),_:1})]),_:1},8,["center","zoom"])]),j("div",at,[j("button",{onClick:r.changeVisible},ke(r.visible?"隐藏":"显示"),1)])],64)}const pt=Q(ot,[["render",it],["__file","three-polygon.vue"]]);export{pt as default};

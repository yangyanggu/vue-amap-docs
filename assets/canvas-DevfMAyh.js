import{b as g,u as x,E}from"./index-XVBT3eyP.js";import{p as C,_ as h,o as v,c as A,f as m,a as _,d as w,w as L,q as k,s as S,ao as M,al as P}from"./app-BIv4BGsj.js";const V=C({name:"ElAmapLayerCanvas",inheritAttrs:!1,__name:"Canvas",props:g({canvas:{required:!0,type:Object},zooms:{type:Array},bounds:{type:[Array,Object]},opacity:{type:Number}}),emits:["init"],setup(s,{expose:o,emit:i}){const e=i;let n;const{$$getInstance:r,parentInstance:t}=x((l,d)=>new Promise(b=>{n=new AMap.CanvasLayer(l),d.addLayer(n),b(n)}),{emits:e,destroyComponent(){n&&(t!=null&&t.$amapComponent)&&(t!=null&&t.isDestroy||t==null||t.$amapComponent.removeLayer(n),n=null)}});o({$$getInstance:r});const a={emits:e,get $amapComponent(){return n},set $amapComponent(l){n=l},$$getInstance:r,parentInstance:t};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function $(s,o,i,e,n,r){return v(),A("div")}const p=h(V,[["render",$],["__file","Canvas.vue"]]);p.install=s=>(s.component(p.name,p),s);const z=p,j=C({__name:"canvas",setup(s,{expose:o}){o();const i=m(15),e=m([116.33719,39.942384]),n=m(!0),r=[116.327911,39.939229,116.342659,39.946275],t=m(void 0);let a;const f={zoom:i,center:e,visible:n,bounds:r,canvas:t,get context(){return a},set context(c){a=c},switchVisible:()=>{n.value=!n.value},initMap:c=>{t.value=document.createElement("canvas"),t.value.width=t.value.height=200,a=t.value.getContext("2d"),a.fillStyle="rgb(0,100,255)",a.strokeStyle="white",a.globalAlpha=1,a.lineWidth=2},initLayer:c=>{let u=0;const y=()=>{a.clearRect(0,0,200,200),a.globalAlpha=(a.globalAlpha-.01+1)%1,u=(u+1)%100,a.beginPath(),a.arc(100,100,u,0,2*Math.PI),a.fill(),a.stroke(),c.reFresh(),AMap.Util.requestAnimFrame(y)};y()},get ElAmap(){return E},get ElAmapLayerCanvas(){return z}};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),B={class:"map-page-container"},F={class:"toolbar"};function N(s,o,i,e,n,r){return v(),A(P,null,[_("div",B,[w(e.ElAmap,{center:e.center,zoom:e.zoom,onInit:e.initMap},{default:L(()=>[e.canvas?(v(),k(e.ElAmapLayerCanvas,{key:0,canvas:e.canvas,bounds:e.bounds,visible:e.visible,onInit:e.initLayer},null,8,["canvas","visible"])):S("",!0)]),_:1},8,["center","zoom"])]),_("div",F,[_("button",{onClick:o[0]||(o[0]=t=>e.switchVisible())},M(e.visible?"隐藏":"显示"),1)])],64)}const D=h(j,[["render",N],["__file","canvas.vue"]]);export{D as default};

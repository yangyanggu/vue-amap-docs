import{b as E,u as L,l as u,E as T}from"./index-XVBT3eyP.js";import{p as f,_ as S,o as h,c as g,f as c,d as y,w as b}from"./app-BIv4BGsj.js";const A=f({name:"ElAmapLayerTiles3d",inheritAttrs:!1,__name:"Tiles3D",props:E({url:{type:String,required:!0},threeScriptUrl:{type:String,default:"//a.amap.com/jsapi_demos/static/data3d/lib/three.117.js"},threeGltfLoader:{type:String,default:"//a.amap.com/jsapi_demos/static/data3d/lib/GLTFLoader.117.min.js"},layerStyle:{type:Object}}),emits:["init"],setup(a,{expose:l,emit:i}){const e=i;let r;const{$$getInstance:n,parentInstance:s}=L((t,m)=>new Promise(_=>{m.plugin(["AMap.3DTilesLayer"],()=>{window.THREE?(p(t),_(r)):u(t.threeScriptUrl,()=>{u(t.threeGltfLoader,()=>{p(t),_(r)})})})}),{emits:e,destroyComponent(){r&&(r=null)}}),p=t=>{let m={};t.layerStyle&&(m=JSON.parse(JSON.stringify(t.layerStyle))),r=new AMap["3DTilesLayer"]({map:s==null?void 0:s.$amapComponent,url:t.url,style:m})};l({$$getInstance:n});const o={emits:e,get $amapComponent(){return r},set $amapComponent(t){r=t},$$getInstance:n,parentInstance:s,createLayer:p};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}});function j(a,l,i,e,r,n){return h(),g("div")}const d=S(A,[["render",j],["__file","Tiles3D.vue"]]);d.install=a=>(a.component(d.name,d),a);const $=d,w=f({__name:"tiles3d",setup(a,{expose:l}){l();const i=c(15),e=c([121.502325,31.238165]),r=c(90),n=c("https://a.amap.com/jsapi_demos/static/data3d/single.json"),s=c({light:{color:"rgb(44,59,75)",intensity:2}}),o={zoom:i,center:e,pitch:r,url:n,layerStyle:s,initMap:t=>{console.log("init map: ",t)},get ElAmap(){return T},get ElAmapLayerTiles3d(){return $}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),x={class:"map-page-container"};function C(a,l,i,e,r,n){return h(),g("div",x,[y(e.ElAmap,{center:e.center,zoom:e.zoom,"view-mode":"3D",pitch:e.pitch,onInit:e.initMap},{default:b(()=>[y(e.ElAmapLayerTiles3d,{url:e.url,"layer-style":e.layerStyle},null,8,["url","layer-style"])]),_:1},8,["center","zoom","pitch"])])}const M=S(w,[["render",C],["__file","tiles3d.vue"]]);export{M as default};
